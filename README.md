# Traverse（トラヴァース）

![アプリアイコン](https://raw.githubusercontent.com/jphacks/sp_2505/main/react_native/assets/images/Traverse.jpg)

## 各種リンク

+ デモ動画URL： (https://youtube.com/shorts/V60dFYHWxRM)
+ 実際の利用風景： (https://youtube.com/shorts/iswVEdUktwk?feature=share)

## 製品概要

**運動 × Tech**：運動不足や運動習慣の欠如をミステリートレイン風の運動ルートで解消するアプリ

### 背景(製品開発のきっかけ、課題等）
#### ユーザーの抱える悩み
毎日の健康維持のためには、継続的な軽い運動が欠かせません。しかし実際には、以下のような悩みを抱える人が多くいます。
- ウォーキングやランニングの**コースがいつも同じで飽きてしまう**
- **どこへ行くか**を考えるのが面倒
- **目標がなくて**モチベーションが続かない
- 努力しても**成果が見えづらい**

![背景](https://raw.githubusercontent.com/jphacks/sp_2505/refs/heads/kishiko-dev/react_native/assets/slides/4.png)

#### 背景にある課題
その背景として、次のような課題が挙げられます。
- 既存の地図アプリは **「最短経路の提示」に特化** しており、「**遠回りして運動量を増やす**」「**訪れたことのない場所を歩いてみる**」といったニーズに応えられていない
- 行き先やルートを自分で考える必要があり、日々の運動が「**作業**」になってしまう
- 成果の可視化や達成感を得られる仕組みが少なく、継続の**モチベーションが保ちにくい**
  

そこで、本製品は、**「日常の運動を楽しみながら続けたい人」** を対象として、**運動コースの単調さや継続の難しさ**といった課題を解決します。そして、**毎日の運動を“義務”から“楽しみ”へと変える** 手段となることを目指しています。


### 製品説明（具体的な製品の説明）
### 特長

![特徴](https://raw.githubusercontent.com/jphacks/sp_2505/refs/heads/kishiko-dev/react_native/assets/slides/5.png)

#### 1. “遠回り最適化”ルート提案
- 最短ではなく、運動目的に合わせた**適度な遠回り**を自動設計
- ジャンル(レストラン、温泉、観光地、公園等)、時間・距離、最終目的地といった**ユーザーの希望**を組み合わせて生成
  
#### 2. 3D×ミステリー演出で継続を促進
- 先の区間をあえて伏せ、区間ごとに次が見える**段階開示**ルート
  
#### 3. 日次ミッションと報酬設計
- 「午前中15分歩く」「3日連続ログイン」「未踏エリア解錠」など、**生活リズムに沿ったミッション**を用意
- 1つ達成するごとに1コインがもらえる、わかりやすく、**集めたくなる仕組み**を構築
  
### 解決出来ること
- 目的地ジャンルや時間・距離に沿った **「ちょうどよい遠回り」を手間なく設計** できる
- 運動ルートの **「単調さ」を解消** し、探索と収集の楽しさで日々の歩行を継続できる
- 歩いた記録が3Dマップに少しずつ反映され、**自分の足跡が見える**形でたまっていく楽しさを味わえる
  
### 今後の展望
- 都市拡大（札幌市北区・東区 → 他主要都市）
- ルート生成の高度化（混雑回避、坂道回避、景観スコア、季節イベント連動）
- コミュニティ要素（フレンドの解禁マップ共有、週次イベント、共同ミッション）
- ウェアラブル連携（歩数・心拍・カロリー推定）と安全配慮（夜道・積雪情報の反映）
  
### 注力したこと（こだわり等）
**1. 「遠回り快適性」の考え方**  

距離や時間、立ち寄りたいジャンルなどをスコアとして評価し、**「最短ルート」だけにとらわれない**提案を実現しました。 **(これは実装できてたらこんな感じで書くって感じです)**  

**2. ミステリー型のルート表示**  

次の区間だけを少しずつ見せることで、行動を小さな達成感の積み重ねに変えることができます。ユーザーを、どこを経由するのか、どこに向かうのか分からない **「ミステリートラベル」のワクワク感** に誘います。  

**3. パネルの使いやすさ**  

移動中でも直感的に操作でき、状況をすぐ確認できるようなレイアウトを設計しました。  

 
## 開発技術
### 活用した技術

#### API・データ
* PLATEAU（CityGML）：3D都市モデル。Unity用PLATEAU SDKで取得・描画
  

#### フレームワーク・ライブラリ・モジュール
* React Native　周辺アプリUI・ミッション画面
* Unity 6000.0.58f2：コア実装／3D描画／ミステリー演出
* Python：バックエンド(経路探索)

![技術スタック](https://raw.githubusercontent.com/jphacks/sp_2505/refs/heads/kishiko-dev/react_native/assets/slides/10.png)

#### デバイス
* iOS / Android スマートフォン


## 独自技術
### ハッカソンで開発した独自機能・技術
+ **遠回りな経路を探索できるアルゴリズム**  

一般的な地図アプリやAPIでは、2つの地点、あるいは複数地点の間を「最短距離」で結ぶ経路しか探索することができません。  
これでは**時間・距離に合わせた**ランニングルートの提案をすることができません。
そこで私たちは、「遠回り」な経路の探索を行うことができるアルゴリズムを開発することで、この課題を解決しました。
焼きなまし法を利用し、経路の部分破壊・再構築を繰り返すことで条件に沿った経路を探索します。具体的には、以下の手順で経路を探索します。
1. 札幌市の交差点を頂点と見立てた無向グラフを構築し、開始地点(始点)から最終目的地(終点)までの最短経路をダイクストラ法で探索します。これを初期解とします。
2. 現在の経路のうち、始点と終点を除いた連続した2頂点をランダムに選びます。この2頂点経路から削除します。
3. 削除した2頂点を通らないような経路のうち、最短であるようなものを探索します。この経路での目的の距離・時間との差が縮まる場合はこの経路を採用し、新しい経路とします。悪化する場合でも、温度パラメータに応じて確率的に採用します。
4. 2~3を100回繰り返し、最終的に得られた経路を提案します。

+ **3Dモデルを利用した、経路の全貌の不透明化**  

2Dマップを用いて経路を表示すると、ユーザーは経路を把握しやすくなってしまい、未知のルートを踏破する楽しみが失われてしまいます。  
そこで私たちは、PLATEAUのCityGMLデータから3Dマップを制作し、ユーザーの移動とともにアバターを移動させることで、次の右左折以降の経路を不明瞭にし、ミステリートレイン特有の「行き先や経路がわからないワクワク感」が得られるよう工夫しました。
